<!DOCTYPE html>

<html>

<body>
  <label for="name">Sensor 1 Name:</label>
  <input type="text" id="name" maxlength="24">
  <button id="rename-sensor-1">Go</button>

  <script>
    function post(url, data) {
      return new Promise((resolve, reject) => {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', `${url}`);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify(data));
        xhr.onreadystatechange = () => {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              resolve(JSON.parse(xhr.responseText));
            }
            else {
              reject({ statusCode: xhr.status, body: xhr.responseText, url: url });
            }
          }
        }
      });
    }

    var sensor1Name = document.getElementById('name');
    document.getElementById('rename-sensor-1').addEventListener('click', () => {
      post('/sensor', { name: sensor1Name.value });
    });
  </script>
</body>

</html>
